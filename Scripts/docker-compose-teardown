#! /usr/bin/env bash

[ -n "$TEST_SKIP_DOCKER_TEARDOWN" ] && exit 0

testname=$(echo "$1" | sed 's/[^a-zA-Z0-9]/_/g')

if [ -z "$testname" ]; then
    echo "WARNING: btest teardown got no test name"
    exit 0
fi

if [ ! -f docker-compose.yml ]; then
    echo "WARNING: btest teardown found no docker-compose.yml"
    exit 0
fi

# Don't wait at all for clean container shutdown
docker-compose -p ${testname}_ -f docker-compose.yml down -t 0

exit 0
